<html>

<head>
  <title>Javascript </title>
  <!-- Adding CodeMirror JS and CSS -->
  <script src="/codemirror/lib/codemirror.js"></script>
  <link rel="stylesheet" href="/codemirror/lib/codemirror.css">
  <!-- Adding htmlmixed mode -->
  <script src="/codemirror/mode/javascript/javascript.js"></script>
  <script src="/codemirror/addon/edit/closetag.js"></script>
  <script src="/codemirror/addon/edit/closebrackets.js"></script>
  <script src="/codemirror/addon/selection/selection-pointer.js"></script>
  <!-- Importing a theme -->
  <link rel="stylesheet" href="/codemirror/theme/dracula.css">
  <!-- Styesheet -->
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="code-container">
    <div class="code">
      <div class="code-header">
        <!-- Copy button -->
        <button class="copy-button" onclick="copyCode()">Copy</button>
        <!-- Run button -->
        <button class="run-code" id="runButton">Run</button>
      </div>

      <!-- Code input area -->
      <textarea id="editor">
// Demo code (the actual new parser character stream implementation)

function StringStream(string) {
  this.pos = 0;
  this.string = string;
}

StringStream.prototype = {
  done: function() {return this.pos >= this.string.length;},
  peek: function() {return this.string.charAt(this.pos);},
  next: function() {
    if (this.pos &lt; this.string.length)
      return this.string.charAt(this.pos++);
  },
  eat: function(match) {
    var ch = this.string.charAt(this.pos);
    if (typeof match == "string") var ok = ch == match;
    else var ok = ch &amp;&amp; match.test ? match.test(ch) : match(ch);
    if (ok) {this.pos++; return ch;}
  },
  eatWhile: function(match) {
    var start = this.pos;
    while (this.eat(match));
    if (this.pos > start) return this.string.slice(start, this.pos);
  },
  backUp: function(n) {this.pos -= n;},
  column: function() {return this.pos;},
  eatSpace: function() {
    var start = this.pos;
    while (/\s/.test(this.string.charAt(this.pos))) this.pos++;
    return this.pos - start;
  },
  match: function(pattern, consume, caseInsensitive) {
    if (typeof pattern == "string") {
      function cased(str) {return caseInsensitive ? str.toLowerCase() : str;}
      if (cased(this.string).indexOf(cased(pattern), this.pos) == this.pos) {
        if (consume !== false) this.pos += str.length;
        return true;
      }
    }
    else {
      var match = this.string.slice(this.pos).match(pattern);
      if (match &amp;&amp; consume !== false) this.pos += match[0].length;
      return match;
    }
  }
};
</textarea>
    </div>
    <!-- Explaination -->
    <div class="other-editors">
      <b>Try More Editors: -</b>
      <a href="/Public/HTML_CSS_JS Editor/index.html">HTML/CSS/JS</a>
      <a href="/Public/Python Editor/index.html">Python</a>
      <a href="/Public/Cython Editor/index.html">Cython</a>
      <a href="/Public/Javascript/index.html">Javascript</a>
      <a href="/Public/Typescript/index.html">Typecript</a>
      <a href="/Public/JSON-LD/index.html">JSON - LD</a>
      <div id="other-editors"></div>
    </div>
  </div>
  <div class="output">
    <b>Output: -</b>
    <div id="output"></div>
  </div>

  <!-- JavaScript to handle running and copying code -->
  <script>
    var editor = CodeMirror.fromTextArea(document.getElementById("editor"), {
        theme: "dracula",
        lineNumbers: true,
        matchBrackets: true,
        continueComments: "Enter",
        extraKeys: {"Ctrl-Q": "toggleComment"}
      });

    const runButton = document.getElementById("runButton");
    const outputArea = document.getElementById("output");

    // Run button click event
    runButton.addEventListener("click", () => {
      try {
        const code = editor.getValue();
        // Create an iframe to execute the code
        const iframe = document.createElement("iframe");
        outputArea.innerHTML = "";
        outputArea.appendChild(iframe);

        // Write the code into the iframe
        iframe.contentDocument.open();
        iframe.contentDocument.write(code);
        iframe.contentDocument.close();
      } catch (error) {
        outputArea.innerHTML = "Error: " + error.message;
      }
    });

    // Copy button
    function copyCode() {
      // Create a temporary textarea element to hold the code text
      const textArea = document.createElement('textarea');
      textArea.value = editor.getValue();

      // Append the textarea to the document
      document.body.appendChild(textArea);

      // Select the text inside the textarea
      textArea.select();

      try {
        // Execute the copy command
        document.execCommand('copy');
      } catch (err) {
        console.error('Unable to copy code: ', err);
      } finally {
        //Remove the temporary textarea
        document.body.removeChild(textArea);
      }
    }

  </script>
</body>

</html>

